/* jcemediabox - 2.0.0dev | 2018-10-02 | https://www.joomlacontenteditor.net | Copyright (C) 2006 - 2018 Ryan Demmer. All rights reserved | GNU/GPL Version 2 or later - http://www.gnu.org/licenses/gpl-2.0.html */
if("undefined"===window.jQuery)throw new Error("JQuery is required to run Mediabox!");!function($){var autoplayInterval,MediaBox={util:{},settings:{selector:".jcepopup, .wfpopup, [data-mediabox]",labels:{close:"Close",next:"Next",previous:"Previous"},autoplay:0},popups:[],items:[],getSite:function(){var base=this.settings.base||"";if(base){var site=document.location.href,parts=site.split("://"),port=parts[0],url=parts[1];return url=url.indexOf(base)!==-1?url.substr(0,url.indexOf(base)):url.substr(0,url.indexOf("/"))||url,port+"://"+url+base}return null},init:function(settings){var self=this;$.extend(this.settings,settings),this.site=this.getSite(),MediaBox.Env.video&&MediaBox.Env.audio||document.createElement("source"),self.create(),1===settings.mediafallback&&self.mediaFallback()},resolveMediaPath:function(s,absolute){function toAbsolute(url){var div=document.createElement("div");return div.innerHTML='<a href="'+url+'">x</a>',div.firstChild.href}return s&&s.indexOf("://")===-1&&"/"!==s.charAt(0)&&(s=this.settings.base+s),absolute?toAbsolute(s):s},mediaFallback:function(){function checkSupport(name,type){var hasSupport=!1;for(var n in supportMap[name])supportMap[name][n].indexOf(type)!==-1&&(hasSupport=Env[name]&&!!Env[name][n]);return hasSupport}var self=this,selector=this.settings.mediaselector,elms=$(selector),swf=this.settings.mediaplayer||"plugins/system/jcemediabox/mediaplayer/mediaplayer.swf",supportMap={video:{h264:["video/mp4","video/mpeg"],webm:["video/webm"],ogg:["video/ogg"]},audio:{mp3:["audio/mp3","audio/mpeg"],ogg:["audio/ogg"],webm:["audio/webm"]}};$(elms).each(function(i,el){var type=el.getAttribute("type"),src=el.getAttribute("src"),name=el.nodeName.toLowerCase(),hasSupport=!1;if(src&&type)hasSupport=checkSupport(name,type);else if($("source[type]",el).each(function(i,n){if(src=n.getAttribute("src"),type=n.getAttribute("type"),"video/x-flv"!==type&&(hasSupport=checkSupport(name,type)),!hasSupport)return!1}),!hasSupport&&"video"===name){var source=$('source[type="video/x-flv"]',el);source.length&&(src=$(source).attr("src"),type="video/x-flv")}if(src&&type&&!hasSupport){var w=el.getAttribute("width"),h=el.getAttribute("height"),html="",flashvars=[];self.settings.mediaplayer||flashvars.push("file="+self.resolveMediaPath(src,!0)),$.each(["autoplay","loop","preload","controls"],function(i,at){var v=el.getAttribute(at);"undefined"!=typeof v&&null!==v&&(v===at&&(v=!0),flashvars.push(at+"="+v))});var i,attrs=el.attributes;for(i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;if(attrName&&(attrName.indexOf("data-video-")!==-1||attrName.indexOf("data-audio-")!==-1)){var name=attrName.replace(/data-(video|audio)-/i,""),value=attrs[i].value;"undefined"==typeof value&&null===value||flashvars.push(name+"="+value)}}html+='<object class="wf-mediaplayer-object" data="'+self.resolveMediaPath(swf)+'" type="application/x-shockwave-flash"',w&&(html+=' width="'+w+'"'),h&&(html+=' height="'+h+'"'),html+=">",html+='<param name="movie" value="'+self.resolveMediaPath(swf)+'" />',html+='<param name="flashvars" value="'+flashvars.join("&")+'" />',html+='<param name="allowfullscreen" value="true" />',html+='<param name="wmode" value="transparent" />';var poster=el.getAttribute("poster");poster&&(html+='<img src="'+self.resolveMediaPath(poster)+'" alt="" />'),html+='<i>Flash is required to play this video. <a href="https://get.adobe.com/flashplayer" target="_blank">Get AdobeÂ® Flash Player</a></i>',html+="</object>";var div=document.createElement("span");div.innerHTML=html;var o=div.firstChild;o&&"OBJECT"===o.nodeName&&(el.parentNode.replaceChild(o,el),poster&&(o.style.backgroundImage="url('"+resolveMediaPath(poster)+"')"))}})},getPopups:function(s,p){var selector=s||this.settings.selector;return $(selector,p)},translate:function(s){var o=this.settings,labels=o.labels;return s&&(s=s.replace(/\{\{(\w+?)\}\}/g,function(a,b){return labels[b]||a})),s},getStyles:function(o){var x=[];return o?($.each(o.split(";"),function(i,s){s=s.replace(/(.*):(.*)/,function(a,b,c){return'"'+b+'":"'+c+'"'}),x.push(s)}),$.parseJSON("{"+x.join(",")+"}")):{}},islocal:function(s){return!/^(\w+):\/\//.test(s)||new RegExp("^("+Env.url+")").test(s)},frameWidth:function(){var s,w=0;return $(".wf-mediabox-info-top, .wf-mediabox-info-bottom").each(function(){s=$(this).hasClass("wf-mediabox-info-top")?"top":"bottom",w+=parseFloat($(this).css("padding-"+s))}),parseFloat($(".wf-mediabox-frame").width()-w)},frameHeight:function(){var h=0,el=$(".wf-mediabox-frame");return $(".wf-mediabox-info-top, .wf-mediabox-info-bottom").each(function(){var s=this.id.replace("jcemediabox-popup-info-","");h+=parseFloat($(el).css("padding-"+s))}),$(window).height()-h},width:function(){return this.frameWidth()},height:function(){var h=0;return $(".wf-mediabox-info-top, .wf-mediabox-info-bottom").each(function(){h+=parseInt($(this).outerHeight())}),this.frameHeight()-h},auto:function(){function makeID(src){var url=document.location.href,key=window.btoa(url+src);return key=key.replace(/[^\w]/g,""),key=key.substr(0,24)}var key,self=this;$(this.popups).each(function(i,el){if(el.auto)if("single"==el.auto){key=el.id||makeID(el.src);var cookie=MediaBox.Storage.get("wf_mediabox_"+key+"_"+i);cookie||(MediaBox.Storage.set("wf_mediabox_"+key+"_"+i,1),self.start(el))}else"multiple"==el.auto&&self.start(el)})},getData:function(n){var data,o={},re=/\w+\[[^\]]+\]/;if(data=$(n).attr("data-mediabox")||$(n).attr("data-json"))n.removeAttribute("data-json"),n.removeAttribute("data-mediabox"),/&\[\]\{\}/.test(data)&&(o=MediaBox.Parameter.parse(data));else{var rel=$(n).attr("rel");if(rel&&re.test(rel)){var args=[];return rel=rel.replace(/\b((\w+)\[(.*?)\])(;?)/g,function(a,b,c){return args.push(b),""}),o=MediaBox.Parameter.parse(args)||{},$(n).attr("rel",rel||o.rel||""),o}}var i,attrs=n.attributes;for(i=attrs.length-1;i>=0;i--){var attrName=attrs[i].name;if(attrName&&attrName.indexOf("data-mediabox-")!==-1){var attr=attrName.replace("data-mediabox-","");o[attr]=attrs[i].value}}return o},process:function(el){var data,match,s=this.settings,o={},group="",auto=!1,src=el.href;if(src){src=src.replace(/b(w|h)=([0-9]+)/g,function(s,k,v){return k="w"===k?"width":"height",k+"="+v}),data=this.getData(el)||{};var title=el.title||data.title||"",caption=data.caption||"",type=el.type||data.type||"",rel=el.rel||"";if(!/\w+\[[^\]]+\]/.test(rel)){var rx="alternate|stylesheet|start|next|prev|contents|index|glossary|copyright|chapter|section|subsection|appendix|help|bookmark|nofollow|noopener|noreferrer|licence|tag|friend",lb="(lightbox([(.*?)])?)",lt="(lyte(box|frame|show)([(.*?)])?)";group=$.trim(rel.replace(new RegExp("(^|\\s+)"+rx+"|"+lb+"|"+lt+"(\\s+|$)","g"),"","gi"))}"AREA"==el.nodeName&&(data||(data=MediaBox.Parameter.parse(src)),group=group||"AREA_ELEMENT",data.type||(match=/\b(ajax|iframe|image|flash|director|shockwave|mplayer|windowsmedia|quicktime|realaudio|real|divx|pdf)\b/.exec(el.className))&&(data.type=match[0])),/autopopup-(single|multiple)/.test(el.className)&&(auto=/(multiple)/.test(el.className)?"multiple":"single"),auto=auto||data.autopopup||"",group=$(el).hasClass("nogroup")?"":group||data.group||"";var width=data.width||s.width,height=data.height||s.height;return $.each(["src","title","caption","group","width","height"],function(i,k){delete data[k]}),/\d/.test(width)&&(width=parseInt(width)),/\d/.test(height)&&(height=parseInt(height)),$.extend(o,{node:el,src:src,title:title,caption:caption,group:group,width:width,height:height,params:data,auto:auto,type:type}),el.href=el.href.replace(/&type=(ajax|text\/html|text\/xml)/,""),o}},create:function(elements){var self=this,s=this.settings,pageload=!1;elements||(pageload=!0,this.popups=[],1===s.legacy&&MediaBox.Convert.legacy(),1===s.lightbox&&MediaBox.Convert.lightbox(),1===s.shadowbox&&MediaBox.Convert.shadowbox()),this.elements=elements||this.getPopups(),$(this.elements).removeClass("jcelightbox jcebox jcepopup").addClass("wfpopup").each(function(i){var o=self.process(this);if(!o)return!0;if(self.popups.push(o),pageload||(i=self.popups.length-1),"_blank"===$(this).attr("target")){var rel=$(this).attr("rel")||"";rel.indexOf("noopener")===-1&&(rel+=" noopener"),rel.indexOf("noreferrer")===-1&&(rel+=" noreferrer"),$(this).attr("rel",$.trim(rel))}if($(this).attr("class",function(i,v){return v.replace(/icon-(top|right|bottom|left|center)(-(top|right|bottom|left|center))?/,"wf-icon-zoom-$1$2")}),1===s.icons&&!$(this).hasClass("noicon")){var $img=$("img:first",this).after('<span class="wf-icon-zoom-image" />');if($img.length){var styles={},flt=$img.css("float");flt&&"none"!==flt&&($img.parent().css("float",flt),$img.css("float","")),$.each(["top","right","bottom","left"],function(i,pos){var m=$img.css("margin-"+pos),p=$img.css("padding-"+pos);m&&/\d/.test(m)&&parseInt(m)>0&&$img.parent().css("margin-"+pos,m),p&&/\d/.test(p)&&parseInt(p)>0&&$img.parent().css("padding-"+pos,p),$.each(["width","style","color"],function(i,prop){var v=$img.css("border-"+pos+"-"+prop);"inherit"!==v&&"initial"!==v&&(styles["border-"+pos+"-"+prop]=v)})}),$img.css({margin:"",padding:"",border:""}),$img.parent().css(styles),$(this).addClass("wf-zoom-image")}else $(this).append('<i class="wf-icon-zoom-link" />')}$(this).on("click",function(e){return e.preventDefault(),self.start(o,i)})})},open:function(data,title,group,type,params){var i,x=0,o={};if("string"==typeof data&&$.extend(o,{src:data,title:title,group:group,type:type,params:params}),data.nodeName&&("A"===data.nodeName||"AREA"===data.nodeName))if(i=$.inArray(this.elements,data),i>=0)o=this.popups[i],x=i;else{var o=this.process(data);x=this.popups.push(o),x--}return this.start(o,x)},start:function(p,i){var len,n=0,items=[];if(this.build())return p.group?($.each(this.popups,function(x,o){o.group===p.group&&(len=items.push(o),i&&x===i&&(n=len-1))}),p.auto||"undefined"!=typeof i||(items.push(p),n=items.length-1)):items.push(p),this.show(items,n)},build:function(){var self=this,s=this.settings;if(0===$(".wf-mediabox").length){var $page=$('<div class="wf-mediabox" />').appendTo("body");s.overlayopacity||$page.addClass("wf-mediabox-transition"),MediaBox.Env.ie6&&$page.addClass("ie6"),MediaBox.Env.iOS&&$page.addClass("ios"),1===s.overlay&&$('<div class="wf-mediabox-overlay" />').appendTo($page).css("background-color",s.overlaycolor),$page.append('<div class="wf-mediabox-frame"><div class="wf-mediabox-body" /></div>'),$page.addClass("wf-mediabox-theme-"+s.theme),MediaBox.Addons.Theme.parse(s.theme,function(s){return self.translate(s)},".wf-mediabox-body"),$(".wf-mediabox-frame").children().hide(),MediaBox.Env.iOS&&$(".wf-mediabox-content").css("webkitOverflowScrolling","touch"),2===s.close&&$(".wf-mediabox-frame").on("click",function(e){e.target&&e.target===this&&self.close()}),$(".wf-mediabox-close, .wf-mediabox-cancel").on("click",function(e){e.preventDefault(),self.close()}),$(".wf-mediabox-next").on("click",function(e){e.preventDefault(),self.nextItem()}),$(".wf-mediabox-prev").on("click",function(e){e.preventDefault(),self.previousItem()}),$(".wf-mediabox-numbers").data("html",$(".wf-mediabox-numbers").html()),s.overlayopacity||$page.addClass("wf-mediabox-open")}return!0},show:function(items,n){var top=0,s=this.settings;return this.items=items,this.bind(!0),$(".wf-mediabox-body").show(),(MediaBox.Env.ie6||"scroll"===s.scrolling)&&(/\d/.test($(".wf-mediabox-body").css("top"))||(top=($(window).height()-$(".wf-mediabox-body").outerHeight())/2),$(".wf-mediabox").css("position","absolute"),$(".wf-mediabox-overlay").css("height",$(document).height()),$(".wf-mediabox-body").css("top",$(document).scrollTop()+top)),1===s.overlay&&$(".wf-mediabox-overlay").length&&s.overlayopacity&&$(".wf-mediabox-overlay").css("opacity",0).animate({opacity:parseFloat(s.overlayopacity)},s.fadespeed),this.change(n)},bind:function(open){var self=this,s=this.settings;MediaBox.Env.ie6&&$("select").each(function(i,el){open&&(el.tmpStyle=el.style.visibility||""),el.style.visibility=open?"hidden":el.tmpStyle}),s.hideobjects&&$("object, embed").not(".wf-mediabox-object").each(function(i,el){open&&(el.tmpStyle=el.style.visibility||""),el.style.visibility=open?"hidden":el.tmpStyle});var scroll=s.scrollpopup;if(open){$(document).on("keydown.wf-mediabox",function(e){self.addListener(e)}),MediaBox.Env.ie6&&($(window).on("scroll.wf-mediabox",function(e){$(".wf-mediabox-overlay").height("height",$(document).height())}),$(window).on("scroll.wf-mediabox",function(e){$(".wf-mediabox-overlay").width($(document).width())}));var xDown,yDown;$(".wf-mediabox-body").on("touchstart",function(e){1===e.originalEvent.touches.length&&1!==self.items.length&&(xDown=e.originalEvent.touches[0].clientX,yDown=e.originalEvent.touches[0].clientY)}).on("touchmove",function(e){if(xDown&&yDown&&1===e.originalEvent.touches.length&&1!==self.items.length){var xUp=e.originalEvent.touches[0].clientX,yUp=e.originalEvent.touches[0].clientY,xDiff=xDown-xUp,yDiff=yDown-yUp;Math.abs(xDiff)>Math.abs(yDiff)&&(xDiff>0?self.nextItem():self.previousItem(),e.preventDefault()),xDown=null,yDown=null}})}else!MediaBox.Env.ie6&&scroll||($(window).off("scroll.wf-mediabox"),$(window).off("resize.wf-mediabox")),$(document).off("keydown.wf-mediabox");var resize=MediaBox.Tools.debounce(function(){var w=Math.floor($(".wf-mediabox-content").width()*($(".wf-mediabox-frame").height()-20)/$(".wf-mediabox-body").height());w=Math.min(w,parseInt($(".wf-mediabox-content").css("max-width"))),$(".wf-mediabox-body").css("max-width",w),$(".wf-mediabox-content > div").css("height","").removeClass("wf-mediabox-content-height")},100);$(window).on("resize.wf-mediabox, orientationchange.wf-mediabox",resize),s.autoplay&&(autoplayInterval=setInterval(function(){self.nextItem()===!1&&clearInterval(autoplayInterval)},1e3*s.autoplay))},calculateWidth:function(cw,ch){var ph=$(".wf-mediabox-body").height(),wh=$(".wf-mediabox-frame").height()-20;cw=cw||$(".wf-mediabox-content").width(),ch=ch||$(".wf-mediabox-content").height();var mh=ph-$(".wf-mediabox-content").height();return ph=mh+ch,Math.min(cw,Math.floor(cw*Math.min(wh/ph,1)))},addListener:function(e){switch(e.keyCode){case 27:this.close();break;case 37:this.previousItem();break;case 39:this.nextItem()}},queue:function(n){var self=this,s=this.settings,changed=!1,callback=function(){changed||(changed=!0,$(".wf-mediabox-content").removeClass("fade-in").animate({opacity:0},s.fadespeed,function(){return self.change(n)}))};callback()},nextItem:function(){if(1===this.items.length)return!1;var n=this.index+1;return!(n<0||n>=this.items.length)&&this.queue(n)},previousItem:function(){if(1===this.items.length)return!1;var n=this.index-1;return!(n<0||n>=this.items.length)&&this.queue(n)},info:function(){function processRe(h){return h=h.replace(ex,'<a href="mailto:$1" target="_blank">$1</a>'),h=h.replace(ux,'<a href="$1" target="_blank">$1</a>')}var popup=this.items[this.index];if($(".wf-mediabox-caption").length){var title=popup.title||"",text=popup.caption||"",h="",ex=/([-!#$%&\'\*\+\\.\/0-9=?A-Z^_`a-z{|}~]+@[-!#$%&\'\*\+\\/0-9=?A-Z^_`a-z{|}~]+\.[-!#$%&\'*+\\.\/0-9=?A-Z^_`a-z{|}~]+)/gi,ux=/([a-zA-Z]{3,9}:\/\/[^\s]+)/gi;if(title=MediaBox.Entities.decode(title),text=MediaBox.Entities.decode(text),title.indexOf("::")!==-1){var parts=title.split("::");title=$.trim(parts[0]),text=$.trim(parts[1])}title&&(h+="<h4>"+title+"</h4>"),text&&(h+="<p>"+text+"</p>"),$(".wf-mediabox-caption").html(h).addClass("wf-mediabox-caption-hidden"),h&&$(".wf-mediabox-caption").find(":not(a)").each(function(){var s=$(this).html();s&&/(@|:\/\/)/.test(s)&&(s=processRe(s))&&$(this).replaceWith(s)})}var self=this,len=this.items.length;if($(".wf-mediabox-numbers").length&&len>1){var html=$(".wf-mediabox-numbers").data("html")||"{{numbers}}";if(html.indexOf("{{numbers}}")!==-1){$(".wf-mediabox-numbers").empty().append("<ul />");for(var i=0;i<len;i++){var n=i+1,title=this.items[i].title||n,link=$('<a title="'+title+'" />').addClass(this.index==i?"active":"").html(n);$("<li />").append(link).appendTo($("ul",".wf-mediabox-numbers")),$(link).on("click",function(e){var x=parseInt(e.target.innerHTML)-1;return self.index!=x&&self.queue(x)})}}html.indexOf("{{current}}")!==-1&&$(".wf-mediabox-numbers").html(html.replace("{{current}}",this.index+1).replace("{{total}}",len))}else $(".wf-mediabox-numbers").empty();$(".wf-mediabox-info-top, .wf-mediabox-info-bottom").show(),$(".wf-mediabox-next, .wf-mediabox-prev").hide(),len>1&&(this.index>0?$(".wf-mediabox-prev").show():$(".wf-mediabox-prev").hide(),this.index<len-1?$(".wf-mediabox-next").show():$(".wf-mediabox-next").hide())},change:function(n){var popup,self=this;this.settings;if(n<0||n>=this.items.length)return!1;this.index=n,$(".wf-mediabox-container, .wf-mediabox-cancel").show(),$(".wf-mediabox-container").addClass("wf-mediabox-loading"),popup=this.items[n];var type="error",html="",plugin=MediaBox.Addons.Plugin.getPlugin(popup);return plugin&&(html=plugin.html(popup),type=plugin.type,!popup.width&&plugin.width&&(popup.width=plugin.width),!popup.height&&plugin.height&&(popup.height=plugin.height)),$(".wf-mediabox-content").children().not(".wf-mediabox-caption, .wf-mediabox-prev, .wf-mediabox-next").remove(),$(".wf-mediabox-content").attr("class",function(i,value){return"wf-mediabox-content"}).addClass("wf-mediabox-content-"+type).prepend(html),this.items[n]=popup,self.setup(),!1},setup:function(){return this.info(),MediaBox.Env.ie&&$(".wf-mediabox-content img").css("-ms-interpolation-mode","bicubic"),this.animate()},showInfo:function(){$(".wf-mediabox-info-top, .wf-mediabox-info-bottom").addClass("wf-info-show")},animate:function(){var self=this,s=this.settings,ss=s.scalespeed,fs=s.fadespeed,popup=this.items[this.index],cw=popup.width||"",ch=popup.height||0;cw=MediaBox.Tools.parseWidth(cw),ch=MediaBox.Tools.parseHeight(ch),$(".wf-mediabox-content").removeClass("wf-mediabox-broken-image wf-mediabox-broken-media"),$(".wf-mediabox-content .wf-icon-404").removeClass("wf-icon-404"),$("img, iframe, video, audio, object, embed",".wf-mediabox-content").on("load loadedmetadata",function(e){if($(".wf-mediabox-container").removeClass("wf-mediabox-loading"),"IMG"===this.nodeName){if("#"===this.src)return;var img=new Image;img.onload=function(){cw=popup.width||img.width,ch=popup.height||img.height,$(".wf-mediabox-container").removeClass("wf-mediabox-loading"),$(".wf-mediabox-content").css("max-width",cw);var w=self.calculateWidth(cw,ch);$(".wf-mediabox-body").animate({"max-width":w},ss,function(){$(".wf-mediabox-content").animate({opacity:1},fs).addClass("fade-in"),$(".wf-mediabox-caption").removeClass("wf-mediabox-caption-hidden")})},img.src=popup.src}else{$(".wf-mediabox-content").css("max-width",cw||640).css("height",ch);var animateProps={"max-width":cw||640};ch&&(animateProps.height=ch,$(".wf-mediabox-content").addClass("wf-mediabox-content-height")),$(".wf-mediabox-body").animate(animateProps,ss,function(){$(".wf-mediabox-content").animate({opacity:1},fs).addClass("fade-in"),$(".wf-mediabox-caption").removeClass("wf-mediabox-caption-hidden")})}self.showInfo()}).on("error",function(e){if("#"!==this.src){var n=this;$(".wf-mediabox-container").removeClass("wf-mediabox-loading"),$(".wf-mediabox-content").addClass(function(){return"IMG"===n.nodeName?"wf-mediabox-broken-image":"wf-mediabox-broken-media"}).animate({opacity:1},fs).addClass("fade-in"),$(".wf-mediabox-content > div").addClass("wf-icon-404")}}),$("img",".wf-mediabox-content").attr("src",popup.src)},close:function(keepopen){var s=this.settings,fs=(s.scalespeed,s.fadespeed);if($("iframe, video",".wf-mediabox-content").attr("src",""),$(".wf-mediabox-content").empty(),$(".wf-mediabox-close").hide(),window.clearInterval(autoplayInterval),!keepopen){$(".wf-mediabox-info-bottom, .wf-mediabox-info-top").hide();this.getPopups();if($(".wf-mediabox-frame").remove(),s.overlayopacity)$(".wf-mediabox-overlay").animate({opacity:0},fs,function(){$(".wf-mediabox").remove()});else{var duration=$(".wf-mediabox-overlay").css("transition-duration");duration=1e3*parseFloat(duration)||500,$(".wf-mediabox").removeClass("wf-mediabox-open");var timer=setTimeout(function(){$(".wf-mediabox").remove(),clearTimeout(timer)},duration)}}return!1}};window.MediaBox=window.WFMediaBox=window.jcepopup=MediaBox}(jQuery),function(){var opera,webkit,ie,ie6,gecko,mac,iDevice,Android,video,audio,nav=navigator,userAgent=nav.userAgent;opera=window.opera&&window.opera.buildNumber,webkit=/WebKit/.test(userAgent),ie=!webkit&&!opera&&/MSIE/gi.test(userAgent)&&/Explorer/gi.test(nav.appName),ie=ie&&/MSIE (\w+)\./.exec(userAgent)[1],ie6=ie&&!window.XMLHttpRequest,gecko=!webkit&&/Gecko/.test(userAgent),mac=userAgent.indexOf("Mac")!=-1,iDevice=/(iPad|iPhone)/.test(userAgent),Android=/Android/.test(userAgent),video=function(){var el=document.createElement("video"),o={};try{if(el.canPlayType){o.ogg=el.canPlayType('video/ogg; codecs="theora"');var h264='video/mp4; codecs="avc1.42E01E';return o.mp4=el.canPlayType(h264+'"')||el.canPlayType(h264+', mp4a.40.2"'),o.webm=el.canPlayType('video/webm; codecs="vp8, vorbis"'),o}}catch(e){}return!1}(),audio=function(){var el=document.createElement("audio"),o={};try{if(el.canPlayType)return o.ogg=el.canPlayType('audio/ogg; codecs="vorbis"'),o.mp3=el.canPlayType("audio/mpeg;"),o.wav=el.canPlayType('audio/wav; codecs="1"'),o.m4a=el.canPlayType("audio/x-m4a;")||el.canPlayType("audio/aac;"),o.webm=el.canPlayType('audio/webm; codecs="vp8, vorbis"'),o}catch(e){}return!1}();var Env={opera:opera,webkit:webkit,ie6:ie6,ie:ie,gecko:gecko,mac:mac,iOS:iDevice,android:Android,video:video,audio:audio};window.MediaBox.Env=Env}(),function(){var entities={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},Entities={encode:function(s){return(""+s).replace(/[<>&\"\']/g,function(c){return entities[c]||c})},decode:function(s){var el;return el=document.createElement("div"),el.innerHTML=s,el.innerHTML||s}};window.MediaBox.Entities=Entities}(),function($,Entities){var Parameter={parse:function(s){var a=[],x=[];if("string"==typeof s){if(/^\{[\w\W]+\}$/.test(s))return $.parseJSON(s);if(/\w+\[[^\]]+\]/.test(s))return s=s.replace(/([\w]+)\[([^\]]+)\](;)?/g,function(a,b,c,d){return'"'+b+'":"'+Entities.encode($.trim(c))+'"'+(d?",":"")}),$.parseJSON("{"+s+"}");s.indexOf("=")!==-1&&(s.indexOf("&")!==-1?x=s.split(/&(amp;)?/g):x.push(s))}return $.isArray(s)&&(x=s),$.each(x,function(i,n){n&&(n=n.replace(/^([^\[]+)(\[|=|:)([^\]]*)(\]?)$/,function(a,b,c,d){return d?/[^0-9]/.test(d)?'"'+b+'":"'+Entities.encode($.trim(d))+'"':'"'+b+'":'+parseInt(d):""}),n&&a.push(n))}),$.parseJSON("{"+a.join(",")+"}")}};window.MediaBox.Parameter=Parameter}(jQuery,MediaBox.Entities),function(){window.sessionStorage||(window.sessionStorage={getItem:function(sKey){return sKey&&this.hasOwnProperty(sKey)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(nKeyId){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[nKeyId])},setItem:function(sKey,sValue){sKey&&(document.cookie=escape(sKey)+"="+escape(sValue)+"; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(sKey){sKey&&this.hasOwnProperty(sKey)&&(document.cookie=escape(sKey)+"=; path=/",this.length--)},hasOwnProperty:function(sKey){return new RegExp("(?:^|;\\s*)"+escape(sKey).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},window.sessionStorage.length=(document.cookie.match(/\=/g)||window.sessionStorage).length);var Storage={get:function(n){return sessionStorage.getItem(n)},set:function(n,v){return sessionStorage.setItem(n,v)}};window.MediaBox.Storage=Storage}(),function(){function _utf8_encode(string){string=string.replace(/\r\n/g,"\n");for(var utftext="",n=0;n<string.length;n++){var c=string.charCodeAt(n);c<128?utftext+=String.fromCharCode(c):c>127&&c<2048?(utftext+=String.fromCharCode(c>>6|192),utftext+=String.fromCharCode(63&c|128)):(utftext+=String.fromCharCode(c>>12|224),utftext+=String.fromCharCode(c>>6&63|128),utftext+=String.fromCharCode(63&c|128))}return utftext}function _utf8_decode(utftext){for(var string="",i=0,c=0,c1=0,c2=0;i<utftext.length;)c=utftext.charCodeAt(i),c<128?(string+=String.fromCharCode(c),i++):c>191&&c<224?(c1=utftext.charCodeAt(i+1),string+=String.fromCharCode((31&c)<<6|63&c1),i+=2):(c1=utftext.charCodeAt(i+1),c2=utftext.charCodeAt(i+2),string+=String.fromCharCode((15&c)<<12|(63&c1)<<6|63&c2),i+=3);return string}var _keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Base64={encode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=_utf8_encode(input);i<input.length;)chr1=input.charCodeAt(i++),chr2=input.charCodeAt(i++),chr3=input.charCodeAt(i++),enc1=chr1>>2,enc2=(3&chr1)<<4|chr2>>4,enc3=(15&chr2)<<2|chr3>>6,enc4=63&chr3,isNaN(chr2)?enc3=enc4=64:isNaN(chr3)&&(enc4=64),output=output+_keyStr.charAt(enc1)+_keyStr.charAt(enc2)+_keyStr.charAt(enc3)+_keyStr.charAt(enc4);return output},decode:function(input){var chr1,chr2,chr3,enc1,enc2,enc3,enc4,output="",i=0;for(input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");i<input.length;)enc1=_keyStr.indexOf(input.charAt(i++)),enc2=_keyStr.indexOf(input.charAt(i++)),enc3=_keyStr.indexOf(input.charAt(i++)),enc4=_keyStr.indexOf(input.charAt(i++)),chr1=enc1<<2|enc2>>4,chr2=(15&enc2)<<4|enc3>>2,chr3=(3&enc3)<<6|enc4,output+=String.fromCharCode(chr1),64!=enc3&&(output+=String.fromCharCode(chr2)),64!=enc4&&(output+=String.fromCharCode(chr3));return output=_utf8_decode(output)}};window.btoa||(window.btoa=Base64.encode),window.atob||(window.atob=Base64.decode)}(),function($,Parameter){var Convert={legacy:function(){$("a[href]").each(function(){if(/com_jce/.test(this.href)){var p,s,img,oc=$(this).attr("onclick");if(oc){s=oc.replace(/&#39;/g,"'").split("'"),p=Parameter.parse(s[1]);var img=p.img||"",title=p.title||""}img&&(/http:\/\//.test(img)||("/"===img.charAt(0)&&(img=img.substr(1)),img=JCEMediaBox.site.replace(/http:\/\/([^\/]+)/,"")+img),$(this).attr({href:img,title:title.replace(/_/," "),onclick:""}),$(this).addClass("jcepopup"))}})},lightbox:function(){$("a[rel*=lightbox]").addClass("jcepopup").each(function(){var r=this.rel.replace(/lightbox\[?([^\]]*)\]?/,function(a,b){return b?"group["+b+"]":""});$(this).attr("rel",r)})},shadowbox:function(){$("a[rel*=shadowbox]").addClass("jcepopup").each(function(){var r=this.rel.replace(/shadowbox\[?([^\]]*)\]?/,function(a,b){var attribs="",group="";return b&&(group="group["+b+"]"),/;=/.test(a)&&(attribs=a.replace(/=([^;"]+)/g,function(x,z){return"["+z+"]"})),group&&attribs?group+";"+attribs:group||attribs||""});$(this).attr("rel",r)})}};window.MediaBox.Convert=Convert}(jQuery,MediaBox.Parameter),function($){function Addons(){var self=this;self.items=[],self.lookup={}}Addons.prototype={add:function(id,addOn){return this.items.push(addOn),this.lookup[id]={instance:addOn},addOn},get:function(name){return name&&this.lookup[name]?this.lookup[name].instance:this.lookup}},Addons.Plugin=new Addons,Addons.Theme=new Addons,Addons.Plugin.getPlugin=function(v,n){var s,r;return s=this.get(n),$.each(s,function(k,o){var p=o.instance,c=new p(v);if(c&&c.is(v))return r=c,!1}),r},Addons.Theme.parse=function(name,translate,parent){function createNode(o,el){$.each(o,function(k,v){if("string"==typeof v)v=translate(v),"text"===k?$(el).html(v):$(el).attr(k,v);else if($.isArray(v))createNode(v,el);else if("string"==typeof k){var node=document.createElement(k);$(el).append(node),createNode(v,node)}else createNode(v,el)})}var data,theme=this.get(name);if("function"!=typeof theme&&(theme=this.get("standard")),data=new theme)return parent||(parent=document.createElement("div")),translate||(translate=function(s){return s}),createNode(data,parent),parent},window.MediaBox.Addons=Addons,window.MediaBox.Plugin=Addons.Plugin,window.MediaBox.Theme=Addons.Theme}(jQuery),function($){function now(){return(new Date).getTime()}var Tools={};Tools.debounce=function(func,wait,immediate){var timeout,args,context,timestamp,result,later=function(){var last=now()-timestamp;last<wait&&last>0?timeout=setTimeout(later,wait-last):(timeout=null,immediate||(result=func.apply(context,args),timeout||(context=args=null)))};return function(){context=this,args=arguments,timestamp=now();var callNow=immediate&&!timeout;return timeout||(timeout=setTimeout(later,wait)),callNow&&(result=func.apply(context,args),context=args=null),result}},Tools.resize=function(w,h,x,y){return w>x?(h*=x/w,w=x,h>y&&(w*=y/h,h=y)):h>y&&(w*=y/h,h=y,w>x&&(h*=x/w,w=x)),w=Math.round(w),h=Math.round(h),{width:Math.round(w),height:Math.round(h)}},Tools.parseWidth=function(w){return/%/.test(w)&&(w=Math.floor($(window).width()*parseInt(w)/100)),/\d/.test(w)&&(w=parseInt(w)),w},Tools.parseHeight=function(h){return/%/.test(h)&&(h=Math.floor($(window).height()*parseInt(h)/100)),/\d/.test(h)&&(h=parseInt(h)),h},window.MediaBox.Tools=Tools}(jQuery),function($,WFMediaBox){function islocal(s){return!/^([a-z]+)?:\/\//.test(s)||new RegExp("("+WFMediaBox.site+")").test(s)}function parseURL(url){var o={};return url=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(url),$.each(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(i,v){var s=url[i];s&&(o[v]=s)}),o}function buildURL(o){var url="";return o.protocol&&(url+=o.protocol+"://"),o.userInfo&&(url+=o.userInfo+"@"),o.host&&(url+=o.host),o.port&&(url+=":"+o.port),o.path&&(url+=o.path),o.query&&(url+="?"+o.query),o.anchor&&(url+="#"+o.anchor),url}function createObject(data,embed){delete data.group,delete data.title,delete data.caption,delete data.width,delete data.height;var attribs=["id","name","style","codebase","classid","type","data"],html="<object ";for(var n in data)attribs.indexOf(n)!==-1&&"string"==typeof data[n]&&(html+=" "+n+'="'+decodeURIComponent(data[n])+'"',delete data[n]);html+=">";for(var n in data)"string"==typeof data[n]&&(html+=' <param name="'+n+'" value="'+decodeURIComponent(data[n])+'" />');if(embed){html+="<embed";for(var n in data)"string"==typeof data[n]&&(html+=" "+n+'="'+decodeURIComponent(data[n])+'"');html+="></embed>"}return html+="</object>"}function createIframe(src){return'<iframe src="'+src+'" frameborder="0" scrolling="0" allowfullscreen="allowfullscreen" />'}WFMediaBox.Plugin.add("flash",function(){this.type="object",this.html=function(data){return data.type="application/x-shockwave-flash",data.data=data.src,$(createObject(data,!0))},this.is=function(data){return/\.swf\b/.test(data.src)}}),WFMediaBox.Plugin.add("flv",function(){this.type="object",this.html=function(data){var swf=WFMediaBox.settings.mediaplayer||"plugins/system/jcemediabox/mediaplayer/mediaplayer.swf";return data.type="application/x-shockwave-flash",data.data=WFMediaBox.resolveMediaPath(swf),data.flashvars="src="+WFMediaBox.resolveMediaPath(data.src,!0),"undefined"==typeof data.controls&&(data.controls="true"),data.flashvars+="&controls="+data.controls,delete data.src,delete data.controls,$(createObject(data))},this.is=function(data){return/\.(flv|f4v)\b/.test(data.src)}}),WFMediaBox.Plugin.add("dailymotion",function(){function processURL(s){var u="https://dailymotion.com/embed/video/",m=s.match(/dai\.?ly(motion)?(.+)?\/(swf|video)?\/?([a-z0-9]+)_?/);return m&&(u+=m[4]),u}this.is=function(data){return/dai\.?ly(motion)/.test(data.src)},this.width=480,this.type="iframe",this.html=function(data){return $(createIframe(processURL(data.src)))}}),WFMediaBox.Plugin.add("quicktime",function(){this.html=function(data){return data.type="video/quicktime",data.classid="clsid:02bf25d5-8c17-4b23-bc80-d3488abddc6b",data.codebase="https://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0",$(createObject(data))},this.type="object",this.width=853,this.is=function(data){return/\.(mov)\b/.test(data.src);
}}),WFMediaBox.Plugin.add("windowsmedia",function(){this.type="object",this.html=function(data){return data.type="application/x-mplayer2",data.classid="clsid:6bf52a52-394a-11d3-b153-00c04f79faa6",data.codebase="https://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701",$(createObject(data,!0))},this.is=function(data){return/\.(wmv|avi)\b/.test(data.src)}}),WFMediaBox.Plugin.add("youtube",function(){function processURL(v){return v=v.replace(/youtu(\.)?be([^\/]+)?\/(.+)/,function(a,b,c,d){return d=d.replace(/(watch\?v=|v\/|embed\/)/,""),b&&!c&&(c=".com"),"youtube"+c+"/embed/"+d}),v=v.replace(/\/\/youtube/i,"//www.youtube"),v=v.replace(/^http:\/\//,"https://"),v+="?html5=1"}this.is=function(data){return/youtu(\.)?be([^\/]+)?\/(.+)/.test(data.src)},this.width=560,this.type="iframe",this.html=function(data){return $(createIframe(processURL(data.src)))}}),WFMediaBox.Plugin.add("vimeo",function(){function processURL(s){return s=s.replace(/(player[\/\.])?vimeo\.com\/(\w+\/)?(\w+\/)?([0-9]+)/,function(a,b,c,d,e){return b?a:"player.vimeo.com/video/"+e}),s=s.replace(/^http:\/\//,"https://")}this.is=function(data){return/vimeo\.com\/(\w+\/)?(\w+\/)?([0-9]+)/.test(data.src)},this.width=500,this.type="iframe",this.html=function(data){return $(createIframe(processURL(data.src)))}}),WFMediaBox.Plugin.add("image",function(){this.type="image",this.html=function(data){return'<img src="#" class="wf-mediabox-img" alt="'+decodeURIComponent(data.title||"")+'" />'},this.is=function(data){var src=data.src;return src=src.split("?")[0],/image\/?/.test(data.type)||/\.(jpg|jpeg|png|gif|bmp|tif|webp)$/i.test(src)}}),WFMediaBox.Plugin.add("video",function(){this.type="video",this.html=function(data){var n,attribs=['src="'+data.src+'"','class="wf-mediabox-video"'],params=data.params||{};for(n in params)attribs.push(n+'="'+params[n]+'"');return params.autoplay||attribs.push("controls"),data.width&&attribs.push('width="'+data.width+'"'),data.height&&attribs.push('height="'+data.height+'"'),"<video "+attribs.join(" ")+"></video>"},this.is=function(data){var src=data.src;return src=src.split("?")[0],(/video\/(mp4|mpeg|webm|ogg)/.test(data.type)||/\.(mp4|webm|ogg)\b/.test(src))&&WFMediaBox.Env.video}}),WFMediaBox.Plugin.add("pdf",function(){this.type="iframe",this.html=function(data){return $('<iframe src="'+data.src+'" frameborder="0" />')},this.height="100%",this.is=function(data){return"pdf"===data.type||/\.pdf$/i.test(data.src)}}),WFMediaBox.Plugin.add("content",function(){this.type="ajax",this.html=function(data){var src=data.src,uri=parseURL(src);islocal(src)&&(uri.query?uri.query.indexOf("tmpl=component")==-1&&(uri.query+="&tmpl=component"):uri.query="tmpl=component"),src=buildURL(uri);var iframe=$('<iframe src="'+src+'" />').load(function(){var n=this,$parent=$(this).parent(),html=this.contentWindow.document.body.innerHTML;if($parent.append(html),uri.anchor){var elm=$parent.find("#"+uri.anchor).get(0);elm&&elm.scrollIntoView()}window.setTimeout(function(){$(n).remove()},10),$parent.find('a[href^="#"]').on("click",function(e){e.preventDefault();var id=$(this).attr("href"),elm=$parent.find(id).get(0);elm&&elm.scrollIntoView()}),WFMediaBox.create(WFMediaBox.getPopups("",$parent))});return iframe},this.is=function(data){return"ajax"===data.type||"text/html"===data.type||$(data.node).hasClass("ajax")}}),WFMediaBox.Plugin.add("dom",function(){this.type="dom",this.html=function(data){var node=$(data.src);return node?$(node).get(0).outerHTML:""},this.is=function(data){return"dom"===data.type}}),WFMediaBox.Plugin.add("iframe",function(){this.type="iframe",this.html=function(data){var src=data.src,uri=parseURL(src);islocal(src)&&(uri.query?uri.query.indexOf("tmpl=component")==-1&&(uri.query+="&tmpl=component"):uri.query="tmpl=component"),src=buildURL(uri);var html=createIframe(src);return $(html)},this.is=function(data){return!data.type||"iframe"===data.type}})}(jQuery,WFMediaBox),WFMediaBox.Theme.add("bootstrap",function(){return[{div:{class:"wf-mediabox-container modal",content:[{div:{class:"wf-mediabox-loader"}},{div:{class:"modal-header",content:[{button:{type:"button",class:"close wf-mediabox-close",text:"&times;"},div:{class:"wf-mediabox-caption"}}]}},{div:{class:"wf-mediabox-content modal-body carousel",content:[{a:{class:"left carousel-control wf-mediabox-prev",text:"&lsaquo;"}},{a:{class:"right carousel-control wf-mediabox-next",text:"&rsaquo;"}}]}}]}}]}),WFMediaBox.Theme.add("light",function(){return[{div:{class:"wf-mediabox-container",content:[{div:{class:"wf-mediabox-loader"}},{div:{class:"wf-mediabox-content"}},{a:{class:"wf-mediabox-next",title:"{{next}}"}},{a:{class:"wf-mediabox-prev",title:"{{previous}}"}}]}},{div:{class:"wf-mediabox-info-bottom",content:[{a:{class:"wf-mediabox-close",title:"{{close}}",text:"{{close}}"}},{div:{class:"wf-mediabox-caption"}},{div:{class:"wf-mediabox-nav",content:[{span:{class:"wf-mediabox-numbers",text:"{{numbers_count}}"}}]}}]}}]}),WFMediaBox.Theme.add("shadow",function(){return[{div:{class:"wf-mediabox-info-top",content:[{div:{class:"wf-mediabox-caption"}}]}},{div:{class:"wf-mediabox-container",content:[{div:{class:"wf-mediabox-loader",content:[{a:{class:"wf-mediabox-cancel",title:"{{cancel}}",text:"{{cancel}}"}}]}},{div:{class:"wf-mediabox-content"}}]}},{div:{class:"wf-mediabox-info-bottom",content:[{div:{class:"wf-mediabox-nav",content:[{span:{class:"wf-mediabox-numbers",text:"{{numbers}}"}},{a:{class:"wf-mediabox-close",title:"{{close}}"}},{a:{class:"wf-mediabox-next",title:"{{next}}"}},{a:{class:"wf-mediabox-prev",title:"{{previous}}"}}]}}]}}]}),WFMediaBox.Theme.add("squeeze",function(){return[{div:{class:"wf-mediabox-container",content:[{a:{class:"wf-mediabox-close wf-icon-close-squeeze",title:"{{close}}"}},{div:{class:"wf-mediabox-loader"}},{div:{class:"wf-mediabox-content"}}]}},{div:{class:"wf-mediabox-info-bottom",content:[{div:{class:"wf-mediabox-caption"}},{div:{class:"wf-mediabox-nav",content:[{a:{class:"wf-mediabox-prev wf-icon-prev-squeeze",title:"{{previous}}"}},{a:{class:"wf-mediabox-next wf-icon-next-squeeze",title:"{{next}}"}},{span:{class:"wf-mediabox-numbers",text:"{{numbers}}"}}]}}]}}]}),WFMediaBox.Theme.add("standard",function(){return[{div:{class:"wf-mediabox-container",content:[{div:{class:"wf-mediabox-loader"}},{div:{class:"wf-mediabox-content"}},{div:{class:"wf-mediabox-caption"}},{nav:{class:"wf-mediabox-nav",content:[{a:{class:"wf-mediabox-close wf-icon-close-standard",title:"{{close}}"}},{a:{class:"wf-mediabox-prev wf-icon-prev-standard",title:"{{previous}}"}},{a:{class:"wf-mediabox-next wf-icon-next-standard",title:"{{next}}"}},{span:{class:"wf-mediabox-numbers",text:"{{numbers}}"}}]}}]}}]}),WFMediaBox.Theme.add("uikit",function(){return[{div:{class:"wf-mediabox-container uk-modal-dialog uk-modal-dialog-lightbox uk-slidenav-position",content:[{a:{class:"wf-mediabox-close uk-modal-close uk-close uk-close-alt"}},{div:{class:"wf-mediabox-content uk-lightbox-content",content:[{a:{class:"wf-mediabox-prev uk-slidenav uk-slidenav-contrast uk-slidenav-previous uk-hidden-touch"}},{a:{class:"wf-mediabox-next uk-slidenav uk-slidenav-contrast uk-slidenav-next uk-hidden-touch"}}]}},{div:{class:"uk-modal-spinner wf-mediabox-loader"}},{div:{class:"wf-mediabox-caption uk-modal-caption"}}]}}]});